คำอธิบาย Logic การแสดงผลข้อมูลของ "ฝ่ายรังวัด" (Survey Department)

1. ช่อง "รับใหม่" (New Intake)
   - เกณฑ์ที่ใช้: วันที่นัดรังวัด (Survey Date)
   - Logic: นับจำนวนงานที่ไม่ซ้ำกัน (Distinct ID) ที่มีวันที่นัดรังวัด (survey_date) อยู่ในเดือนนั้นๆ
   - เงื่อนไขเพิ่มเติม: ต้องมีสถานะระบุว่า "นัดรังวัด" หรือ "ดำเนินการเสร็จสิ้น" แล้ว

2. ช่อง "งานเสร็จภายใน 30 วัน" (Comp 30)
   - เกณฑ์ที่ใช้: เดือนที่รับเรื่อง (received_date) = เดือนที่เสร็จ (completion_date)
   - Logic: นับงานที่รับเรื่องและเสร็จในเดือนเดียวกัน (นับตามเดือนที่เสร็จ)
   - ตัวอย่าง: รับ ม.ค. เสร็จ ม.ค. -> แสดงในช่อง 30 วัน ของเดือน ม.ค.

3. ช่อง "งานเสร็จภายใน 60 วัน" (Comp 60)
   - เกณฑ์ที่ใช้: เดือนที่รับเรื่อง (received_date) ≠ เดือนที่เสร็จ (completion_date)
   - Logic: นับงานที่รับเรื่องเดือนอื่น แต่มาเสร็จเดือนนี้ (นับตามเดือนที่เสร็จ)
   - ตัวอย่าง: รับ ม.ค. เสร็จ ก.พ. -> แสดงในช่อง 60 วัน ของเดือน ก.พ.

4. ช่อง "งานคงค้างเดือนนี้" (Pending This Month)
   - Logic: รับใหม่เดือนนี้ - งานเสร็จ 30 วัน เดือนนี้
   - หมายเหตุ: ไม่หัก comp60 เพราะเป็นงานเดือนก่อน ไม่เกี่ยวกับยอดรับใหม่เดือนนี้
   - ตัวอย่าง: ม.ค. รับ 6, เสร็จ30=1 -> คงค้างเดือนนี้ = 5
   - ตัวอย่าง: ก.พ. รับ 3, เสร็จ30=2 -> คงค้างเดือนนี้ = 1
   - "รวมทั้งหมด" = สะสมจากทุกเดือน (Front-end คำนวณ)

5. ช่อง "งานรับเรื่องจากทะเบียน"
   - เกณฑ์ที่ใช้: วันที่รับเรื่อง (Received Date)
   - Logic: นับจำนวนงานทั้งหมดที่มีวันที่รับเรื่อง (received_date) อยู่ในเดือนนั้นๆ
   - วัตถุประสงค์: เพื่อดูปริมาณงานขาเข้าจริงที่ฝ่ายทะเบียนส่งเรื่องมาให้ ก่อนที่จะมีการลงนัดรังวัด

สรุปไทม์ไลน์ของข้อมูล:
- รับเรื่องจากทะเบียน -> ดูที่ received_date
- ลงนัดรังวัด (รับใหม่) -> ดูที่ survey_date
- งานเสร็จ -> ดูที่ completion_date (เทียบกับ received_date เพื่อแยก 30/60 วัน)
